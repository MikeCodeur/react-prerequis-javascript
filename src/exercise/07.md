# Promise aync await

### ğŸ’¡ Maitriser les Promises et fonctions Asynchrones

## ğŸ“ Tes notes

Detaille ce que tu as appris ici
`src/exercise/07.md`ouÂ surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

### 1. Les Promises

On utilise souvent les promises pour les actions longues, et ou l'on veut gÃ©rer
les cas ok et ko . Une `Promise` prend un fonction qui possÃ¨de 2 paramÃ¨tres :
`resolve` et `reject`

```jsx
//crÃ©ation d'un promise
function simulationFetch(duration = 0) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      if (duration > 400) {
        reject(`KO Timeout`)
      } else {
        resolve(`OK`)
      }
    }, duration)
  })
}
```

Une promise s'utilise de la maniÃ¨re suivante

```jsx
simulationFetch(100).then(callBackOK, callBakcError)

simulationFetch(100).then(
  e => console.log(e),
  err => console.error(err),
) // OK
simulationFetch(500).then(
  e => console.log(e),
  err => console.error(err),
) // KO
```

ğŸ“‘ Le liens vers la doc Promise :
[https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Promise](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Promise)

### 2. Async Await

Il est parfois utile de pourvoir rendre le code bloquant (c'est Ã  dire de
bloquer la suite de l'exÃ©cution du code et attendre le rÃ©sultat de l'action).
Pour cela on utile la syntaxe `async / await`

> âš ï¸ `Async` se situe devant la dÃ©claration de la fonction

```jsx
async function simulationFetchAsyncSuccess() {
  const result = await simulationFetch(200)
  return `success: ${result}`
}

async function simulationFetchAsyncFailed() {
  const result = await simulationFetch(500)
  return `failed: ${result}` // ne devrait pas etre executÃ©
}

async function simulationFetchAsyncCatch() {
  let result
  try {
    result = await simulationFetch(500, true)
    return `failed: ${result}` // this would not be executed
  } catch (error) {
    return `failed and recovered: ${error}`
  }
}

simulationFetchAsyncSuccess().then(
  e => console.log(e),
  err => console.error(err),
)
simulationFetchAsyncFailed().then(
  e => console.log(e),
  err => console.error(err),
)
simulationFetch().then(
  e => console.log(e),
  err => console.error(err),
)
```

## Exercice

CrÃ©er une fonction `Promise` qui `resolve(`OK`)` si les nombres pairs et
`reject(`KO`)` sur les nombres impairs. On utilisera les modulo.

ğŸ“‘
[https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Operators/Remainder](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Operators/Remainder)

## Aller plus loin

ğŸ“‘ Le lien vers la doc
[https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Promise](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Promise)

## ğŸœ Feedback

Remplir le formulaire le
[formulaire de FeedBack](https://go.mikecodeur.com/cours-react-avis).
